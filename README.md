# GST

## Лабораторные работы по гибридным суперкомпьютерным технологиям (2 семестр)

## Вариант 7

### Бизнес логика: **Умножение матрицы на вектор**

Варианты исполнения:

1) Последовательная реализация
2) Реализация через OpenMP
3) Реализация через MPI
4) MPI в docker
5) Реализация на CUDA

## Особенности исполнения в каждом из вариантов

1) Считывание данных происходит из файла (либо данные передаются по протоколу TCP)

2) Данные генерируются утилитой, принимающей в качестве параметров размер данных для обработки в мегабайтах и имя файла (TCP хост-порт) куда будут выгружены данные

3) Программа выполняет бизнес-логику и записывает результат в выходной файл (отправляет данные на порт возврата результатов программы-генератора по TCP, сохранение файла с результатами осуществляет программа-генератор)

4) В конце файла с результатами сохраняется информация о времени выполнения вычислений и размере обработанных данных

## Отчет должен включать

1) Описание алгоритма выполнения бизнес-логики
2) Исходный код
3) Описание логики распараллеливания (варианты исполнения 2-4)
4) График зависимости времени выполнения от размера данных (5 точек)
5) docker-compose.yml, Docker файлы и команды для сборки и запуска MPI-кластера из 3 контейнеров (head – компилирует и запускает программу на контейнерах node1 и node2) для варианта исполнения 4.

*написание программы в варианте TCP дает +20% по сравнению с реализацией через файлы.

## Тестирование программы

### Запуск генератора для всех наборов данных:

```shell script
chmod +x ./generate_all_data_samples.sh
./generate_all_data_samples.sh
```

### Запуск последовательного вычисления для всех наборов данных:

```shell script
chmod +x ./run_sequential_execution_on_all_data_samples.sh
./run_sequential_execution_on_all_data_samples.sh
```

### Запуск ускоренной программы с помощью OpenMP для всех наборов данных:

```shell script
chmod +x ./run_openmp_execution_on_all_data_samples.sh
./run_openmp_execution_on_all_data_samples.sh
```

### Запуск ускоренной программы с помощью OpenMPI для всех наборов данных:

#### На локальной машине:

```shell script
chmod +x ./run_openmpi_execution_on_all_data_samples.sh
./run_openmpi_execution_on_all_data_samples.sh
```

#### На кластере:

```shell script
chmod +x ./run_cluster_openmpi_execution_on_all_data_samples.sh
./run_cluster_openmpi_execution_on_all_data_samples.sh
```